import{r as C,W as xa,X as Na,Y as Da,Z as Ta,_ as me,$ as qe,a0 as wa,a1 as Ea,a2 as Ie,a3 as Ca,a4 as ka,a5 as ie,d as Aa,a6 as La,a7 as Pa,K as Sa,a8 as X,a9 as Je,aa as Wa,j as e,e as ve,a as m,P as Fa,m as de,T as F,f as oe,B as Q,F as q,ab as z,o as Oa,g as Qe,i as Ra,h as Ye,k as Xe,l as Me,ac as Ae,ad as Le,ae as Be,w as Ze,af as qa,ag as ae,ah as Ma,ai as Ba,aj as ja,y as v,ak as K,al as je,am as $e,an as f,ao as we,ap as $a,aq as za,ar as Ua,as as Pe,q as ue,at as _a,s as V,M as pe,x as xe,t as le,au as Va,av as Ga,H as he,aw as De,ax as ye,ay as Se,az as Ha,aA as Ka,aB as ea,aC as Ja,aD as Qa,aE as Ya,aF as Xa,aG as Za,aH as et,aI as aa,D as ta,C as ra,I as ze,S as Ue,aJ as _e,v as Ee,R as se,aK as Ve,aL as at,aM as tt,p as na,aN as rt,aO as nt,aP as lt,aQ as ot,aR as ne,aS as Ce,aT as st,aU as it,aV as ct,L as la,aW as ge,aX as Y,aY as dt,aZ as Ge,a_ as $,a$ as ut,b0 as mt,U as pt,b1 as ht,b2 as yt,b3 as ft,b4 as bt,b5 as ee,b6 as gt}from"./index-Cf0SbAd0.js";import{P as vt}from"./Projectstatus-PabjCUYO.js";import{E as Te}from"./EmployeeModelClone-B5er9R1W.js";function It(n){const{rootElementName:y="",componentName:t}=n,[h,s]=C.useState(y.toUpperCase()),d=C.useCallback(r=>{var o;s((o=r==null?void 0:r.tagName)!=null?o:"")},[]);return[h,d]}const oa="Button";function xt(n){return xa(oa,n)}Na(oa,["root","active","disabled","focusVisible"]);function Nt(n={}){const{disabled:y=!1,focusableWhenDisabled:t,href:h,rootRef:s,tabIndex:d,to:r,type:o,rootElementName:l}=n,a=C.useRef(),[u,x]=C.useState(!1),{isFocusVisibleRef:I,onFocus:w,onBlur:O,ref:N}=Da(),[g,T]=C.useState(!1);y&&!t&&g&&T(!1),C.useEffect(()=>{I.current=g},[g,I]);const[A,B]=It({rootElementName:l??(h||r?"a":void 0),componentName:"Button"}),M=E=>D=>{var W;g&&D.preventDefault(),(W=E.onMouseLeave)==null||W.call(E,D)},U=E=>D=>{var W;O(D),I.current===!1&&T(!1),(W=E.onBlur)==null||W.call(E,D)},L=E=>D=>{var W;if(a.current||(a.current=D.currentTarget),w(D),I.current===!0){var _;T(!0),(_=E.onFocusVisible)==null||_.call(E,D)}(W=E.onFocus)==null||W.call(E,D)},S=()=>{const E=a.current;return A==="BUTTON"||A==="INPUT"&&["button","submit","reset"].includes(E==null?void 0:E.type)||A==="A"&&(E==null?void 0:E.href)},G=E=>D=>{if(!y){var W;(W=E.onClick)==null||W.call(E,D)}},H=E=>D=>{var W;y||(x(!0),document.addEventListener("mouseup",()=>{x(!1)},{once:!0})),(W=E.onMouseDown)==null||W.call(E,D)},te=E=>D=>{var W;if((W=E.onKeyDown)==null||W.call(E,D),!D.defaultMuiPrevented&&(D.target===D.currentTarget&&!S()&&D.key===" "&&D.preventDefault(),D.target===D.currentTarget&&D.key===" "&&!y&&x(!0),D.target===D.currentTarget&&!S()&&D.key==="Enter"&&!y)){var _;(_=E.onClick)==null||_.call(E,D),D.preventDefault()}},Z=E=>D=>{var W;if(D.target===D.currentTarget&&x(!1),(W=E.onKeyUp)==null||W.call(E,D),D.target===D.currentTarget&&!S()&&!y&&D.key===" "&&!D.defaultMuiPrevented){var _;(_=E.onClick)==null||_.call(E,D)}},P=Ta(B,s,N,a),k={};return d!==void 0&&(k.tabIndex=d),A==="BUTTON"?(k.type=o??"button",t?k["aria-disabled"]=y:k.disabled=y):A==="INPUT"?o&&["button","submit","reset"].includes(o)&&(t?k["aria-disabled"]=y:k.disabled=y):A!==""&&(!h&&!r&&(k.role="button",k.tabIndex=d??0),y&&(k["aria-disabled"]=y,k.tabIndex=t?d??0:-1)),{getRootProps:(E={})=>{const D=me({},qe(n),qe(E)),W=me({type:o},D,k,E,{onBlur:U(D),onClick:G(D),onFocus:L(D),onKeyDown:te(D),onKeyUp:Z(D),onMouseDown:H(D),onMouseLeave:M(D),ref:P});return delete W.onFocusVisible,W},focusVisible:g,setFocusVisible:T,active:u,rootRef:P}}const Dt=["action","children","disabled","focusableWhenDisabled","onFocusVisible","slotProps","slots","rootElementName"],Tt=n=>{const{active:y,disabled:t,focusVisible:h}=n;return Ca({root:["root",t&&"disabled",h&&"focusVisible",y&&"active"]},ka(xt))},wt=C.forwardRef(function(y,t){var h;const{action:s,children:d,focusableWhenDisabled:r=!1,slotProps:o={},slots:l={},rootElementName:a="button"}=y,u=wa(y,Dt),x=C.useRef();let I=a;typeof l.root=="string"?I=l.root:(u.href||u.to)&&(I="a");const{active:w,focusVisible:O,setFocusVisible:N,getRootProps:g}=Nt(me({},y,{focusableWhenDisabled:r,rootElementName:I}));C.useImperativeHandle(s,()=>({focusVisible:()=>{N(!0),x.current.focus()}}),[N]);const T=me({},y,{active:w,focusableWhenDisabled:r,focusVisible:O}),A=Tt(T),B=u.href||u.to?"a":"button",M=(h=l.root)!=null?h:B,U=Ea({elementType:M,getSlotProps:g,externalForwardedProps:u,externalSlotProps:o.root,additionalProps:{ref:t},ownerState:T,className:A.root});return Ie.jsx(M,me({},U,{children:d}))});function Et(){const n=ie(),{employeeId:y}=n,t=Aa(),[h,{isLoading:s}]=La(),[d,{isLoading:r}]=Pa(),[o,{isLoading:l}]=Sa(),a=X(),{formState:u,watch:x,getValues:I}=a;Je();const w=Wa(),{photoURL:O,firstName:N,lastName:g}=x(),T=async()=>{if(await a.trigger()){const U=a.getValues();d({id:parseInt(y,10),employeeModel:U}).unwrap().then(L=>{t(z({message:"An employee Updated successfully."}))}).catch(L=>{console.error("Error updating employee:",L),t(z({message:"Error updating employee",variant:"error"}))})}else t(z({message:"Please fill all required fields",variant:"warning"}))},A=async()=>{if(await a.trigger()){const U=a.getValues();h({employeeModel:U}).unwrap().then(L=>{t(z({message:"An employee created successfully and a welcome email sent to employee."})),w("/apps/employees/employeesSearch")}).catch(L=>{console.error("Error creating employee:",L),t(z({message:"Error creating employee",variant:"error"}))})}else t(z({message:"Please fill all required fields",variant:"warning"}))};function B(){const M=I();t(Oa({children:m(oe,{children:[e(Qe,{id:"alert-dialog-title",children:"Are you sure you want to delete this Employee ?"}),e(Ye,{children:m(Ra,{id:"alert-dialog-description",children:[e("strong",{children:"Employee Number"})," : ",M.employeeNumber," ",e("br",{}),e("strong",{children:"Employee Name "}),": ",M.firstName," ",M.lastName," ",e("br",{}),e("strong",{children:"Employee Email"})," : ",M.email]})}),m(Xe,{children:[e(Q,{onClick:()=>{t(Me())},color:"primary",children:"Cancel"}),e(Q,{onClick:()=>{t(Me()),o({id:parseInt(y,10)}).unwrap().then(U=>{t(z({message:"An employee deleted successfully."})),w("/apps/employees/employeesSearch")})},color:"primary",autoFocus:!0,children:"Yes"})]})]})}))}return s||r||l?e("div",{className:"flex  justify-center h-screen w-screen",children:e(ve,{})}):m("div",{className:"flex flex-col sm:flex-row flex-1 w-full items-center justify-between space-y-8 sm:space-y-0 py-24 sm:py-32",children:[m("div",{className:"flex flex-col items-start space-y-8 sm:space-y-0 w-full sm:max-w-full min-w-0",children:[e(de.div,{initial:{x:20,opacity:0},animate:{x:0,opacity:1,transition:{delay:.3}},children:e(Fa,{className:"mb-8"})}),m("div",{className:"flex items-center max-w-full space-x-12",children:[e(de.div,{className:"hidden sm:flex",initial:{scale:0},animate:{scale:1,transition:{delay:.3}},children:O?e("img",{className:"w-32 sm:w-48 rounded",src:O,alt:"no image"}):e("img",{className:"w-32 sm:w-48 rounded",src:"assets/images/apps/ecommerce/product-image-placeholder.png",alt:"no image"})}),e(de.div,{className:"flex flex-col min-w-0",initial:{x:-20},animate:{x:0,transition:{delay:.3}},children:e(F,{className:"text-15 sm:text-2xl truncate font-semibold",children:N||"New Employee"})})]})]}),e(de.div,{className:"flex flex-1 w-full",initial:{opacity:0,x:20},animate:{opacity:1,x:0,transition:{delay:.3}},children:y!=="new"?m(oe,{children:[e(Q,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:B,startIcon:e(q,{className:"hidden sm:flex",children:"heroicons-outline:trash"}),children:"Remove"}),e(Q,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:T,children:"Save"})]}):e(Q,{className:"whitespace-nowrap mx-4",variant:"contained",color:"secondary",onClick:A,children:"Add"})})]})}var We={},Ct=Le;Object.defineProperty(We,"__esModule",{value:!0});var sa=We.default=void 0,kt=Ct(Ae()),He=Ie;sa=We.default=(0,kt.default)([(0,He.jsx)("circle",{cx:"12",cy:"12",r:"3.2"},"0"),(0,He.jsx)("path",{d:"M9 2 7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3.17L15 2zm3 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5"},"1")],"CameraAlt");const At=Ba(),fe=C.forwardRef(({label:n,placeholder:y,multiple:t,attachedLabel:h,onOptionAdd:s,renderInput:d,options:r=[],onChange:o,value:l,...a},u)=>{const[x,I]=C.useState(!1),[w,O]=C.useState(null),[N,g]=C.useState(!1),[T,A]=C.useState(r);C.useEffect(()=>{A(r)},[r]);const B=async(L,S,G)=>{typeof S!="string"&&(S&&"inputValue"in S?(O({name:S.inputValue}),I(!0)):o&&o(L,S,G))},M=async()=>{if(w&&s){g(!0);try{const L=await s(w);A(S=>[...S,L]),o&&o({},t?[L]:L,"createOption")}catch(L){console.error("Failed to add new option:",L)}finally{g(!1)}}I(!1),O(null)},U=!t||Array.isArray(l)&&l.length===0;return m(oe,{children:[" ",e(ae,{...a,ref:u,options:T,value:(T==null?void 0:T.find(L=>L.id===l))||null,multiple:t,getOptionLabel:L=>typeof L=="string"?L:L.inputValue?L.inputValue:L.name,isOptionEqualToValue:(L,S)=>L.id===(S==null?void 0:S.id),filterOptions:(L,S)=>{const G=At(L,S),{inputValue:H}=S,te=L.some(Z=>H===Z.name);return H!==""&&!te&&U&&G.push({inputValue:H,name:`Add "${H}"`,id:"new"}),G},renderOption:(L,S)=>Be("li",{...L,key:S.id},S.inputValue?m(oe,{children:[e(Ze,{sx:{mr:1}})," ",S.name]}):S.name),renderInput:L=>d({...L,label:n,placeholder:y}),renderTags:(L,S)=>L.map((G,H)=>Be(qa,{variant:"outlined",label:G.name,...S({index:H}),key:G.id})),onChange:B,noOptionsText:U?"No options":e(F,{color:"text.secondary",children:"Remove the selected option to add a new one"})})," ",m(Ma,{open:x,onClose:()=>I(!1),children:[" ",e(Qe,{children:"Add New Option"})," ",m(Ye,{children:[" ",m(F,{children:[" ",'Do you want to add "',w==null?void 0:w.name,'" as a new option?'," ",h&&m(F,{variant:"body2",color:"text.secondary",children:[" ",h," "]})," "]})," "]})," ",m(Xe,{children:[" ",m(Q,{onClick:()=>I(!1),disabled:N,children:[" ","Cancel"," "]})," ",m(Q,{onClick:M,autoFocus:!0,disabled:N,children:[" ",N?"Adding...":"Add"," "]})," "]})," "]})," "]})});fe.displayName="EnhancedAutocomplete";var ke=(n=>(n.Parent="Parent",n.Spouse="Spouse",n.FamilyMember="FamilyMember",n.Friend="Friend",n.Other="Other",n))(ke||{}),ia=(n=>(n.Unknown="Unknown",n.Single="Single",n.Married="Married",n.Divorced="Divorced",n.Widowed="Widowed",n.Separated="Separated",n.CommonLaw="CommonLaw",n.CivilUnion="Civil Union",n.DomesticPartnership="DomesticPartnership",n.Other="Other",n))(ia||{}),ca=(n=>(n.OPositive="OPositive",n.APositive="APositive",n.BPositive="BPositive",n.AbPositive="AbPositive",n.AbNegative="AbNegative",n.ANegative="ANegative",n.BNegative="BNegative",n.ONegative="ONegative",n))(ca||{}),da=(n=>(n.OnRoll="OnRoll",n.Consultant="Consultant",n.Labour="Labour",n.Apprentice="Apprentice",n.VisitBased="VisitBased",n))(da||{}),Fe={},Lt=Le;Object.defineProperty(Fe,"__esModule",{value:!0});var ua=Fe.default=void 0,Pt=Lt(Ae()),St=Ie;ua=Fe.default=(0,Pt.default)((0,St.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline");var Oe={},Wt=Le;Object.defineProperty(Oe,"__esModule",{value:!0});var ma=Oe.default=void 0,Ft=Wt(Ae()),Ot=Ie;ma=Oe.default=(0,Ft.default)((0,Ot.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline");function Rt({disabled:n=!1}){const{control:y,formState:t}=X(),{errors:h}=t,[s,d]=C.useState(""),r=C.useRef(null),{data:o,isFetching:l}=ja({email:s},{skip:!s}),a=C.useCallback(w=>{r.current&&clearTimeout(r.current),r.current=setTimeout(()=>{d(w)},2e3)},[]),u=w=>w||(l?"Checking email...":o?"This email is already in use.":s?"This email is available.":""),x=w=>w||o?"error":s&&!o?"success":"primary",I=w=>l?e(we,{color:"inherit",size:20}):w||o?e(ma,{sx:{color:$e[500]}}):s&&!o?e(ua,{sx:{color:je[500]}}):null;return e(f,{name:"email",control:y,render:({field:w})=>{var O,N,g;return e(v,{...w,fullWidth:!0,label:"Email",variant:"outlined",margin:"normal",required:!0,value:w.value||"",disabled:n,placeholder:"Email",error:!!h.email||o,helperText:u((O=h.email)==null?void 0:O.message),color:x((N=h.email)==null?void 0:N.message),InputProps:{endAdornment:e(K,{position:"end",children:I((g=h.email)==null?void 0:g.message)}),startAdornment:e(K,{position:"start",children:e(q,{size:20,children:"heroicons-solid:envelope"})})},sx:{"& .MuiFormHelperText-root":{color:o?h.email||o?$e[700]:"inherit":je[700]}},onChange:T=>{const{value:A}=T.target;w.onChange(A),a(A)}})}})}function qt({UserRole:n}){const{data:y=[]}=$a(),{data:t=[]}=za(),[h]=Ua(),{employeeId:s}=ie(),d=async N=>{try{const g=await h({employeeCategory:N}).unwrap();return{...N,id:g.id}}catch(g){throw console.error("Failed to add new option:",g),g}},r=X(),{control:o,formState:l}=r,{errors:a}=l,u=C.useRef(null),x=(N,g)=>{const A=["image/jpeg","image/jpg","image/png","image/webp"];if(N){if(N.size>5e6){alert("File size should be less than 5MB");return}if(!A.includes(N.type)){alert("File type should be JPEG, JPG, PNG, or WEBP");return}const B=new FileReader;B.onloadend=()=>{const M=B.result;g(M)},B.readAsDataURL(N)}},{fields:I,append:w,remove:O}=Pe({control:o,name:"employeeRelationshipDetails"});return m("div",{className:"space-y-48",children:[m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-circle"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Basic Information"})]}),m("div",{className:"flex flex-row",children:[m("div",{children:[" ",e(f,{name:"photoURL",control:o,render:({field:{onChange:N,value:g}})=>m(ue,{sx:{position:"relative",width:150,height:150,mb:2,cursor:"pointer","&:hover .MuiAvatar-root":{opacity:.3},"&:hover .camera-icon":{opacity:1}},onClick:()=>{var T;return(T=u.current)==null?void 0:T.click()},children:[e(_a,{src:g||"undefined",sx:{width:"100%",height:"100%",transition:"opacity 0.3s"}}),e(ue,{className:"camera-icon",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",opacity:0,transition:"opacity 0.3s",color:"white"},children:e(sa,{sx:{fontSize:40}})}),e("input",{ref:u,type:"file",hidden:!0,onChange:T=>{var A;return x(((A=T.target.files)==null?void 0:A[0])||null,N)},accept:"image/*"})]})})]}),m("div",{className:"flex flex-col mx-20",children:[e("div",{className:"flex -mx-4",children:e(f,{name:"employeeNumber",control:o,render:({field:N})=>{var g;return e(v,{...N,value:N.value||"",className:" mx-4",disabled:!0,label:"Employee Number",fullWidth:!0,margin:"normal",error:!!(a!=null&&a.employeeNumber),helperText:(g=a==null?void 0:a.employeeNumber)==null?void 0:g.message})}})}),m("div",{className:"flex -mx-4",children:[e(f,{name:"employeeCategoryId",control:o,render:({field:N})=>e(fe,{...N,fullWidth:!0,label:"Select or add an category",options:y,onChange:(g,T)=>{N.onChange(T?T.id:null)},isOptionEqualToValue:(g,T)=>g.id===T,className:"mt-8 mb-16 mx-4",placeholder:"Type to search or add",renderInput:g=>{var T;return e(v,{...g,value:g.value||"",placeholder:"Select or Add Employee categories",label:"Category",required:!0,variant:"outlined",InputLabelProps:{shrink:!0},error:!!(a!=null&&a.employeeCategoryId),helperText:(T=a==null?void 0:a.employeeCategoryId)==null?void 0:T.message})},attachedLabel:"Category will be added to the database",onOptionAdd:d})}),e(f,{name:"roleId",control:o,render:({field:{onChange:N,value:g}})=>e(ae,{className:"mt-8 mb-16 mx-4",fullWidth:!0,options:t,getOptionLabel:T=>(T==null?void 0:T.name)||"",disabled:n==="Employee",isOptionEqualToValue:(T,A)=>T.id===(A==null?void 0:A.id),value:t.find(T=>T.id===g)||null,onChange:(T,A)=>{N(A?A.id:null)},renderInput:T=>{var A;return e(v,{...T,label:"Role",required:!0,variant:"outlined",error:!!(a!=null&&a.roleId),helperText:(A=a==null?void 0:a.roleId)==null?void 0:A.message})}})})]}),m("div",{className:"flex -mx-4",children:[e(f,{name:"firstName",control:o,render:({field:N})=>{var g;return e(v,{...N,value:N.value||"",className:" mx-4",required:!0,label:"First Name",fullWidth:!0,margin:"normal",error:!!(a!=null&&a.firstName),helperText:(g=a==null?void 0:a.firstName)==null?void 0:g.message})}}),e(f,{name:"middleName",control:o,render:({field:N})=>{var g;return e(v,{...N,value:N.value||"",className:"mx-4",label:"Middle Name",fullWidth:!0,required:!0,margin:"normal",error:!!(a!=null&&a.middleName),helperText:(g=a==null?void 0:a.middleName)==null?void 0:g.message})}}),e(f,{name:"lastName",control:o,render:({field:N})=>{var g;return e(v,{...N,value:N.value||"",required:!0,className:" mx-4",label:"Last Name",fullWidth:!0,margin:"normal",error:!!(a!=null&&a.lastName),helperText:(g=a==null?void 0:a.lastName)==null?void 0:g.message})}})]})]})]})]}),m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-circle"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Contact Information"})]}),m("div",{className:"flex -mx-4",children:[e(Rt,{disabled:s!=="new"}),e(f,{name:"alternateEmail",control:o,render:({field:N})=>e(v,{...N,value:N.value||"",label:"Alternate Email",fullWidth:!0,type:"email",margin:"normal",variant:"outlined",placeholder:"Alternate Email",className:"mx-4",InputProps:{startAdornment:e(K,{position:"start",children:e(q,{size:20,children:"heroicons-solid:envelope"})})}})})]}),m("div",{className:"flex -mx-4",children:[e(f,{name:"phoneNumber",control:o,render:({field:N})=>{var g;return e(v,{...N,value:N.value||"",label:"Phone Number",fullWidth:!0,type:"number",margin:"normal",variant:"outlined",placeholder:"Phone Number",className:"mx-4",error:!!a.phoneNumber,helperText:(g=a==null?void 0:a.phoneNumber)==null?void 0:g.message,InputProps:{startAdornment:e(K,{position:"start",children:e(q,{size:20,children:"heroicons-solid:phone"})})}})}}),e(f,{name:"alternateNumber",control:o,render:({field:N})=>{var g;return e(v,{...N,value:N.value||"",label:"Alternate Number",type:"number",className:"mx-4",variant:"outlined",placeholder:"Phone Number",margin:"normal",fullWidth:!0,error:!!a.alternateNumber,helperText:(g=a.alternateNumber)==null?void 0:g.message,InputProps:{startAdornment:e(K,{position:"start",children:e(q,{size:20,children:"heroicons-solid:phone"})})}})}})]})]}),m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-circle"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Relationship Information"})]}),I.map((N,g)=>m(ue,{sx:{mb:4},children:[m(V,{container:!0,spacing:2,children:[e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeRelationshipDetails.${g}.relationshipType`,control:o,render:({field:T})=>e(v,{...T,select:!0,value:T.value??Object.values(ke)[0],fullWidth:!0,label:"Relationship Type",SelectProps:{MenuProps:{disableScrollLock:!1,autoFocus:!0}},children:Object.values(ke).map(A=>e(pe,{value:A,children:A},A))})})}),e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeRelationshipDetails.${g}.name`,control:o,rules:{required:"Name is required"},render:({field:T})=>e(v,{...T,fullWidth:!0,label:"Name"})})}),e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeRelationshipDetails.${g}.email`,control:o,rules:{required:"Email is required"},render:({field:T})=>e(v,{...T,fullWidth:!0,label:"Email"})})}),e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeRelationshipDetails.${g}.phoneNumber`,control:o,rules:{required:"Phone Number is required"},render:({field:T})=>e(v,{...T,fullWidth:!0,label:"Phone Number"})})})]}),m(ue,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[m(Q,{className:g>0?"hideAddContextButton":"",variant:"contained",color:"secondary",size:"small",onClick:()=>w({relationshipType:"",name:"",email:"",phoneNumber:""}),children:[e(q,{size:20,children:"heroicons-outline:plus"}),e("span",{className:"mx-4 sm:mx-8",children:"Add Contact"})]}),g>0&&e(Q,{variant:"outlined",color:"error",startIcon:e(xe,{}),onClick:()=>O(g),children:"Remove"})]})]},N.id))]})]})}function Mt({UserRole:n}){const y=X(),{control:t,formState:h}=y,{errors:s}=h;return m("div",{children:[e(f,{name:"employeePersonalDetails.gender",control:t,render:({field:d})=>{var r,o,l;return m(le,{component:"fieldset",margin:"normal",fullWidth:!0,required:!0,error:!!((r=s.employeePersonalDetails)!=null&&r.gender),children:[e(Va,{component:"legend",children:"Gender"}),m(Ga,{row:!0,...d,children:[e(he,{value:"male",control:e(De,{}),label:"Male"}),e(he,{value:"female",control:e(De,{}),label:"Female"}),e(he,{value:"other",control:e(De,{}),label:"Other"})]}),((o=s.employeePersonalDetails)==null?void 0:o.gender)&&e(F,{variant:"caption",color:"error",children:(l=s.employeePersonalDetails)==null?void 0:l.gender.message})]})}}),e(f,{name:"employeePersonalDetails.maritalStatus",control:t,defaultValue:[],render:({field:{onChange:d,value:r}})=>e(ae,{className:"mt-8 mb-16 ",freeSolo:!0,fullWidth:!0,options:Object.values(ia),value:r,onChange:(o,l)=>{d(l)},renderInput:o=>e(v,{...o,value:o.value||"",placeholder:"Select Marital Status",label:"Marital Status",variant:"outlined",InputLabelProps:{shrink:!0}})})}),e(f,{name:"employeePersonalDetails.bloodGroup",control:t,defaultValue:[],render:({field:{onChange:d,value:r}})=>e(ae,{className:"mt-8 mb-16 ",freeSolo:!0,fullWidth:!0,options:Object.values(ca),value:r,onChange:(o,l)=>{d(l)},renderInput:o=>{var l,a,u;return e(v,{...o,value:o.value||"",placeholder:"Select Blood Group",label:"Blood Group",variant:"outlined",InputLabelProps:{shrink:!0},error:!!((l=s.employeePersonalDetails)!=null&&l.bloodGroup),helperText:(u=(a=s.employeePersonalDetails)==null?void 0:a.bloodGroup)==null?void 0:u.message})}})}),e(f,{control:t,name:"employeePersonalDetails.dateOfBirth",render:({field:{value:d,onChange:r}})=>{var o,l;return e(ye,{format:"dd/MM/yyyy",value:new Date(d)||null,onChange:a=>{r(a==null?void 0:a.toISOString())},slotProps:{textField:{label:"Date of Birth",InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",error:!!((o=s.employeePersonalDetails)!=null&&o.dateOfBirth),helperText:(l=s==null?void 0:s.employeePersonalDetails)==null?void 0:l.dateOfBirth.message},actionBar:{actions:["clear"]}}})}})]})}function Bt({UserRole:n}){var Re;const y=X(),{control:t,watch:h,formState:s,setValue:d}=y,{errors:r}=s,{employeeId:o}=ie(),l=o?parseInt(o,10):void 0,a=h("employeeDepartmentId"),u=h("employeeWorkInformation.salaryType"),x=h("employeeWorkInformation.useDefaultLeaves"),[I,w]=C.useState(null),O=Se(),{data:N=[],isLoading:g}=Ha(),{data:T=[],isLoading:A}=Ka(),{data:B=[],isLoading:M}=ea(),{data:U=[],isLoading:L}=Ja(),[S,{isLoading:G}]=Qa(),{data:H=[],isLoading:te}=Ya(),{data:Z,isLoading:P}=Xa({employeeId:l},{skip:!l}),{fields:k,append:j,remove:E}=Pe({control:t,name:"employeeLeaves",keyName:"key"}),D=o==="new"?null:l,{data:W=[],refetch:_}=Za({departmentId:a,employeeId:D}),[re]=et(),[be]=aa();C.useEffect(()=>{I&&ce(I)},[I]);const ce=async p=>{try{const c=await S({jobLevelId:p}).unwrap();x&&d("employeeLeaves",c.map(i=>({id:i.employeeLeaveTypeId,employeeLeaveType:i.employeeLeaveTypes.name,totalLeaves:i.totalLeaves})))}catch(c){console.error("Error fetching default leaves:",c)}},ya=async p=>{try{const c=await re({site:p}).unwrap();return{...p,id:c.id}}catch(c){throw console.error("Failed to add new option:",c),c}},fa=async p=>{try{const c=await be({employeeDesignation:p}).unwrap();return{...p,id:c.id}}catch(c){throw console.error("Failed to add new option:",c),c}},ba=C.useMemo(()=>[{accessorKey:"projectNumber",header:"Project Number",accessorFn:p=>(p==null?void 0:p.projectNumber)??"N/A"},{accessorKey:"projectName",header:"Project Name",accessorFn:p=>(p==null?void 0:p.projectName)??"N/A"},{accessorKey:"projectDiscription",header:"Project Description",accessorFn:p=>(p==null?void 0:p.projectDescription)??"N/A"},{accessorKey:"status",header:"Project Status",Cell:({row:p})=>{var c;return e(vt,{status:((c=p.original)==null?void 0:c.status)??"Unknown"})}}],[]),ga=(p,c)=>h("employeeLeaves").some((b,R)=>R!==c&&b.employeeLeaveType===p);return C.useEffect(()=>{o==="new"&&(x||(h("employeeLeaves").filter(i=>i.id&&i.totalLeaves&&i.totalLeaves>0).length===0?O(z({message:"At least one leave type must be filled completely",autoHideDuration:8e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"warning"})):O(z({message:"",variant:"success"}))))},[h("employeeLeaves"),x,O]),C.useEffect(()=>{o!=="new"&&u==="OnRoll"&&(()=>{const c=parseFloat(h("employeeWorkInformation.basic")||"0"),i=parseFloat(h("employeeWorkInformation.pf")||"0"),b=parseFloat(h("employeeWorkInformation.hrAllowances")||"0"),R=parseFloat(h("employeeWorkInformation.gratuity")||"0"),J=parseFloat(h("employeeWorkInformation.bonus")||"0"),Ne=parseFloat(h("employeeWorkInformation.esi")||"0"),va=parseFloat(h("employeeWorkInformation.pt")||"0"),Ia=c+i+b+R+J+Ne+va;d("employeeWorkInformation.salary",Ia)})()},[o,u,h("employeeWorkInformation.basic"),h("employeeWorkInformation.pf"),h("employeeWorkInformation.hrAllowances"),h("employeeWorkInformation.gratuity"),h("employeeWorkInformation.bonus"),h("employeeWorkInformation.esi"),h("employeeWorkInformation.pt"),d]),C.useEffect(()=>{a&&_()},[a,_]),M||A||g||L||G||te?e("div",{className:"flex justify-center h-screen w-screen",children:e(ve,{})}):m("div",{className:"space-y-48",children:[m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-circle"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Job profile"})]}),e(f,{name:"employeeDepartmentId",control:t,render:({field:{onChange:p,value:c}})=>e(ae,{fullWidth:!0,options:N,getOptionLabel:i=>i==null?void 0:i.name,isOptionEqualToValue:(i,b)=>i.id===b.id,value:(N==null?void 0:N.find(i=>i.id===c))||null,onChange:(i,b)=>{p(b?b.id:null)},renderInput:i=>{var b;return e(v,{...i,value:i.value||"",placeholder:"Select Employee Department",label:"Department",variant:"outlined",required:!0,InputLabelProps:{shrink:!0},error:!!r.employeeDepartmentId,helperText:(b=r.employeeDepartmentId)==null?void 0:b.message})}})}),e(f,{name:"employeeDesignationId",control:t,render:({field:p})=>e(fe,{...p,fullWidth:!0,value:p.value??"",label:"Select or add Designation",options:B,onChange:(c,i)=>{p.onChange(i?i.id:null)},isOptionEqualToValue:(c,i)=>c.id===i.id,placeholder:"Type to search or add",renderInput:c=>{var i;return e(v,{...c,placeholder:"Select or Add Designation",label:"Designation",required:!0,value:p.value??"",variant:"outlined",InputLabelProps:{shrink:!0},error:!!r.employeeDesignationId,helperText:(i=r.employeeDesignationId)==null?void 0:i.message})},attachedLabel:"A Designation will be added to the database",onOptionAdd:fa})}),e(f,{name:"employeeReportToId",control:t,render:({field:{onChange:p,value:c}})=>e(ae,{fullWidth:!0,options:W,getOptionLabel:i=>i==null?void 0:i.name,isOptionEqualToValue:(i,b)=>i.id===b.id,value:(W==null?void 0:W.find(i=>i.id===c))||null,onChange:(i,b)=>{p(b?b.id:null)},renderInput:i=>{var b;return e(v,{...i,value:i.value||"",placeholder:"Select Employee Report To",label:"Report To",variant:"outlined",InputLabelProps:{shrink:!0},error:!!r.employeeReportToId,helperText:(b=r.employeeReportToId)==null?void 0:b.message})}})}),e(f,{name:"employeeWorkInformation.siteId",control:t,render:({field:p})=>e(fe,{...p,fullWidth:!0,label:"Select or add Site",options:T,onChange:(c,i)=>{p.onChange(i?i.id:null)},isOptionEqualToValue:(c,i)=>c.id===i,placeholder:"Type to search or add",renderInput:c=>{var i;return e(v,{...c,value:c.value||"",placeholder:"Select or Add Site",label:"Site",variant:"outlined",InputLabelProps:{shrink:!0},error:!!(r!=null&&r.siteId),helperText:(i=r==null?void 0:r.siteId)==null?void 0:i.message})},attachedLabel:"A site will be added to the database",onOptionAdd:ya})})]}),o!=="new"&&m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-circle"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Salary Information"})]}),e("div",{className:"flex -mx-4",children:e(f,{name:"employeeWorkInformation.salaryType",control:t,rules:{required:"Salary Type is required"},render:({field:p})=>{var c,i,b;return e(v,{...p,select:!0,className:"mx-4",label:"Salary Type",value:p.value??"",fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.salaryType),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.salaryType)==null?void 0:b.message,children:Object.values(da).map(R=>e(pe,{value:R,children:R},R))})}})}),m("div",{className:"flex -mx-4",children:[e(f,{name:"employeeWorkInformation.salary",control:t,rules:{required:"Salary is required",validate:p=>p&&p>0||"Salary must be greater than zero"},render:({field:p})=>{var c,i,b;return e(v,{...p,label:"Salary",type:"number",value:p.value??"",className:"mx-4",InputProps:{inputProps:{min:1,readOnly:u==="OnRoll"},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.salary),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.salary)==null?void 0:b.message})}}),u==="OnRoll"&&m(oe,{children:[e(f,{name:"employeeWorkInformation.basic",control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,label:"Basic",type:"number",className:"mx-4",InputProps:{inputProps:{min:0},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.basic),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.basic)==null?void 0:b.message})}}),e(f,{name:"employeeWorkInformation.hrAllowances",control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,label:"HR Allowances",type:"number",className:"mx-4",InputProps:{inputProps:{min:0},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.hrAllowances),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.hrAllowances)==null?void 0:b.message})}}),e(f,{name:"employeeWorkInformation.bonus",defaultValue:null,control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,label:"Bonus",value:p.value??0,type:"number",className:"mx-4",InputProps:{inputProps:{min:0},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.bonus),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.bonus)==null?void 0:b.message})}})]})]}),u==="OnRoll"&&m("div",{className:"flex -mx-4",children:[e(f,{name:"employeeWorkInformation.gratuity",control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,label:"Gratuity",type:"number",className:"mx-4",InputProps:{inputProps:{min:0},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.gratuity),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.gratuity)==null?void 0:b.message})}}),e(f,{name:"employeeWorkInformation.pf",control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,label:"PF",type:"number",className:"mx-4",InputProps:{inputProps:{min:0},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.pf),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.pf)==null?void 0:b.message})}}),e(f,{name:"employeeWorkInformation.esi",control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,label:"ESI",type:"number",className:"mx-4",InputProps:{inputProps:{min:0},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.esi),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.esi)==null?void 0:b.message})}}),e(f,{name:"employeeWorkInformation.pt",control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,label:"PT",type:"number",className:"mx-4",InputProps:{inputProps:{min:0},startAdornment:e(K,{position:"start",children:"₹"})},fullWidth:!0,error:!!((c=r.employeeWorkInformation)!=null&&c.pt),helperText:(b=(i=r.employeeWorkInformation)==null?void 0:i.pt)==null?void 0:b.message})}})]})]}),m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-circle"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Hiring Information"})]}),m("div",{className:"flex -mx-4",children:[e(f,{control:t,name:"employeeWorkInformation.hireDate",render:({field:{value:p,onChange:c}})=>{var i,b,R;return e(ye,{format:"dd/MM/yyyy",value:p?new Date(p):null,onChange:J=>{c(J==null?void 0:J.toISOString())},className:"mx-4",slotProps:{textField:{label:"Hire Date",required:!0,InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",error:!!((i=r.employeeWorkInformation)!=null&&i.hireDate),margin:"normal",helperText:(R=(b=r.employeeWorkInformation)==null?void 0:b.hireDate)==null?void 0:R.message},actionBar:{actions:["clear"]}}})}}),e(f,{control:t,name:"employeeWorkInformation.confirmationDate",render:({field:{value:p,onChange:c}})=>{var i,b,R;return e(ye,{format:"dd/MM/yyyy",value:new Date(p),onChange:J=>{c(J==null?void 0:J.toISOString())},className:"mx-4",slotProps:{textField:{label:"Confirmation Date",InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",error:!!((i=r.employeeWorkInformation)!=null&&i.confirmationDate),margin:"normal",helperText:(R=(b=r.employeeWorkInformation)==null?void 0:b.confirmationDate)==null?void 0:R.message},actionBar:{actions:["clear"]}}})}}),e(f,{name:"employeeWorkInformation.totalPreviousExperience",control:t,render:({field:p})=>{var c,i,b;return e(v,{...p,value:p.value,label:"Total Years of Previous Experience",fullWidth:!0,type:"number",margin:"normal",variant:"outlined",placeholder:"Total Years of Previous Experience",className:"mx-4",error:!!((c=r.employeeWorkInformation)!=null&&c.totalPreviousExperience),helperText:(b=(i=r==null?void 0:r.employeeWorkInformation)==null?void 0:i.totalPreviousExperience)==null?void 0:b.message})}})]})]}),m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:presentation-chart-bar"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Assiegned Projects"})]}),P?e(ve,{}):Z&&Z.length>0?e(ta,{enableTopToolbar:!1,enableRowActions:!1,enableRowSelection:!1,data:Z,columns:ba}):e(F,{children:"No projects assigned."})]}),m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-circle"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Leave Information"})]}),e(f,{name:"employeeWorkInformation.useDefaultLeaves",control:t,render:({field:p})=>e(he,{control:e(ra,{...p,checked:x,onChange:c=>{p.onChange(c.target.checked),c.target.checked||(d("jobLevelLeaveType",null),d("employeeLeaves",[]))}}),label:"Use Default Leaves"})}),x&&m(le,{fullWidth:!0,error:!!r.jobLevelLeaveType,children:[e(ze,{id:"job-level-select-label",children:"Job Level"}),e(f,{name:"jobLevelLeaveType",control:t,rules:{required:"Please select a job level"},render:({field:p})=>e(Ue,{...p,labelId:"job-level-select-label",label:"Job Level",onChange:c=>{p.onChange(c.target.value),w(c.target.value)},error:!!r.jobLevelLeaveType,children:U.map(c=>e(pe,{value:c.id,children:c.jobLevel},c.id))})}),r.jobLevelLeaveType&&e(_e,{error:!0,children:(Re=r.jobLevelLeaveType)==null?void 0:Re.message})]}),x&&I&&e("div",{className:"space-y-4",children:k.map((p,c)=>m("div",{className:"flex space-x-4 m-4",children:[e("div",{className:"flex-1 m-4",children:e(v,{label:"Leave Type",value:p.employeeLeaveType,fullWidth:!0,InputProps:{readOnly:!0}})}),e("div",{className:"flex-1 m-4",children:e(v,{label:"Total Leaves",value:p.totalLeaves,fullWidth:!0,InputProps:{readOnly:!0}})})]},p.id))}),!x&&m("div",{className:"space-y-4",children:[k.map((p,c)=>m("div",{className:"flex space-x-4 m-4",children:[e("div",{className:"flex-1 m-4",children:e(f,{name:`employeeLeaves.${c}.id`,control:t,rules:{validate:i=>c===0||i?!ga(i,c)||"This leave type is already selected":!0},render:({field:i,fieldState:{error:b}})=>m(le,{fullWidth:!0,error:!!b,children:[e(ze,{id:`leave-type-label-${c}`,children:"Leave Type"}),e(Ue,{...i,labelId:`leave-type-label-${c}`,label:"Leave Type",value:i.value||"",onChange:R=>{const J=H.find(Ne=>Ne.id===R.target.value);i.onChange(R.target.value),d(`employeeLeaves.${c}.employeeLeaveType`,J?J.name:"")},children:H.map(R=>e(pe,{value:R.id,children:R.name},R.id))}),b&&e(_e,{children:b.message})]})})}),e("div",{className:"flex-1 m-4",children:e(f,{name:`employeeLeaves.${c}.totalLeaves`,control:t,rules:{validate:i=>c===0||i?i>0||"Total leaves must be greater than 0":!0},render:({field:i,fieldState:{error:b}})=>e(v,{...i,label:"Total Leaves",type:"number",fullWidth:!0,error:!!b,helperText:b==null?void 0:b.message})})}),e(Ee,{"aria-label":"delete",color:"error",type:"button",onClick:()=>E(c),children:e(xe,{})})]},p.key)),e(Q,{type:"button",startIcon:e(Ze,{}),onClick:()=>j({id:"",employeeLeaveType:"",totalLeaves:""}),children:"Add Leave Type"})]})]})]})}const pa=[{name:"USA",states:["California","Texas","New York","Florida","Illinois"]},{name:"India",states:["Gujarat","Maharashtra","Karnataka","Tamil Nadu","Delhi"]}],jt={California:["Los Angeles","San Francisco","San Diego"],Texas:["Houston","Austin","Dallas"],"New York":["New York City","Buffalo","Albany"],Florida:["Miami","Orlando","Tampa"],Illinois:["Chicago","Springfield","Peoria"],Gujarat:["Ahmedabad","Surat","Vadodara"],Maharashtra:["Mumbai","Pune","Nagpur"],Karnataka:["Bangalore","Mysore","Hubli"],"Tamil Nadu":["Chennai","Coimbatore","Madurai"],Delhi:["New Delhi","Noida","Gurgaon"]},$t=n=>{const y=pa.find(t=>t.name===n);return y?y.states:[]},zt=n=>jt[n]||[];function Ke({prefix:n,sectionLabel:y}){const{control:t,watch:h,setValue:s}=X(),d=h(`${n}.country`),r=h(`${n}.state`),o=$t(d),l=zt(r);return se.useEffect(()=>{o.includes(r)||(s(`${n}.state`,null),s(`${n}.city`,null))},[d,r,s,n,o]),se.useEffect(()=>{l.includes(h(`${n}.city`))||s(`${n}.city`,null)},[r,s,n,l,h]),m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:home"}),e(F,{className:"text-2xl",color:"text.secondary",children:y})]}),e(f,{name:`${n}.addressLine1`,control:t,render:({field:a,fieldState:{error:u}})=>e(v,{...a,fullWidth:!0,label:"Address Line 1",error:!!u,helperText:u==null?void 0:u.message})}),e(f,{name:`${n}.addressLine2`,control:t,render:({field:a,fieldState:{error:u}})=>e(v,{...a,fullWidth:!0,label:"Address Line 2",error:!!u,helperText:u==null?void 0:u.message})}),m("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e(le,{children:e(f,{name:`${n}.country`,control:t,render:({field:{onChange:a,value:u,...x}})=>e(ae,{...x,options:pa.map(I=>I.name),renderInput:I=>e(v,{...I,label:"Country"}),onChange:(I,w)=>a(w),value:u||null,isOptionEqualToValue:(I,w)=>I===w})})}),e(le,{children:e(f,{name:`${n}.state`,control:t,render:({field:{onChange:a,value:u,...x}})=>e(ae,{...x,options:o,renderInput:I=>e(v,{...I,label:"State"}),onChange:(I,w)=>a(w),value:u||null,disabled:!d,isOptionEqualToValue:(I,w)=>I===w})})}),e(le,{children:e(f,{name:`${n}.city`,control:t,render:({field:{onChange:a,value:u,...x}})=>e(ae,{...x,options:l,renderInput:I=>e(v,{...I,label:"City"}),onChange:(I,w)=>a(w),value:u||null,disabled:!r,isOptionEqualToValue:(I,w)=>I===w})})})]}),e(f,{name:`${n}.pinCode`,control:t,render:({field:a,fieldState:{error:u}})=>e(v,{...a,fullWidth:!0,label:"Pincode",type:"number",error:!!u,helperText:u==null?void 0:u.message})})]})}function Ut({UserRole:n}){const y=X(),{watch:t,setValue:h}=y,s=t("employeeAddresses.useUserAddressForMailing");return C.useEffect(()=>{if(s){const d=y.getValues("employeeAddresses.userAddress");Object.keys(d).forEach(r=>{h(`employeeAddresses.mailingAddress.${r}`,d[r])})}},[s,y,h]),m("div",{className:"space-y-48",children:[e(Ke,{prefix:"employeeAddresses.userAddress",sectionLabel:"Residence Address"}),e(he,{control:e(ra,{checked:s,onChange:d=>h("employeeAddresses.useUserAddressForMailing",d.target.checked)}),label:"Use the same address for mailing"}),!s&&e(Ke,{prefix:"employeeAddresses.mailingAddress",sectionLabel:"Mailing Address"})]})}const _t=["SSC","HSC","Diploma","Degree","Certification","Master","PHD","Other"];function Vt({UserRole:n}){const y=X(),{control:t,formState:h}=y,{fields:s,append:d,remove:r}=Pe({control:t,name:"employeeEducationDetail"});return e("div",{className:"space-y-48",children:e("div",{className:"space-y-16",children:s.map((o,l)=>m(Ve,{sx:{mb:4,p:2,border:"1px solid #e0e0e0",borderRadius:1},children:[m(V,{container:!0,spacing:2,children:[e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeEducationDetail.${l}.type`,control:t,render:({field:a})=>e(v,{...a,select:!0,fullWidth:!0,label:"Education Type",children:_t.map(u=>e(pe,{value:u,children:u},u))})})}),e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeEducationDetail.${l}.university`,control:t,rules:{required:"university is required"},render:({field:a})=>e(v,{...a,fullWidth:!0,label:"University"})})}),e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeEducationDetail.${l}.passingYear`,control:t,rules:{required:"Year is required"},render:({field:a})=>e(v,{...a,fullWidth:!0,label:"Year of Completion",type:"number"})})}),e(V,{item:!0,xs:12,sm:6,children:e(f,{name:`employeeEducationDetail.${l}.grade`,control:t,rules:{required:"Grade/Score is required"},render:({field:a})=>e(v,{...a,fullWidth:!0,label:"Grade/Score"})})})]}),m(Ve,{sx:{mt:2,display:"flex",justifyContent:"space-between"},children:[m(Q,{className:l>0?"hideAddContextButton":"",variant:"contained",color:"secondary",size:"small",onClick:()=>d({type:"",university:"",passingYear:"",grade:""}),children:[e(q,{size:20,children:"heroicons-outline:plus"}),e("span",{className:"mx-4 sm:mx-8",children:"Add Education"})]}),l>0&&e(Q,{variant:"outlined",color:"error",startIcon:e(xe,{}),onClick:()=>r(l),children:"Remove"})]})]},o.id))})})}function Gt({UserRole:n}){const y=X(),{control:t,formState:h}=y,{errors:s}=h,{data:d=[]}=ea(),[r]=aa(),o=async l=>{try{const a=await r({employeeDesignation:l}).unwrap();return console.log(a),{...l,id:a}}catch(a){throw console.error("Failed to add new option:",a),a}};return e("div",{className:"space-y-48",children:m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:clipboard-document-list"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Insurance Information"})]}),e("div",{className:"flex -mx-4",children:e(f,{name:"employeeInsuranceDetails.employeeDesignationId",disabled:!0,control:t,render:({field:l})=>e(fe,{...l,fullWidth:!0,label:"Select or add Designation",options:d,onChange:(a,u)=>{l.onChange(u?u.id:null)},isOptionEqualToValue:(a,u)=>a.id===u.id,placeholder:"Type to search or add",renderInput:a=>{var u;return e(v,{...a,value:a.value||"",placeholder:"Select or Add Designation",label:"Designation",required:!0,variant:"outlined",InputLabelProps:{shrink:!0},error:!!(s!=null&&s.siteId),helperText:(u=s==null?void 0:s.siteId)==null?void 0:u.message})},attachedLabel:"A Designation will be added to the database",onOptionAdd:o})})}),e("div",{className:"flex -mx-4",children:e(f,{name:"employeeInsuranceDetails.serialNumber",control:t,render:({field:l})=>{var a,u,x;return e(v,{...l,label:"Serial Number",className:" mx-4",fullWidth:!0,value:l.value||"",error:!!((a=s.employeeInsuranceDetails)!=null&&a.serialNumber),helperText:(x=(u=s.employeeInsuranceDetails)==null?void 0:u.serialNumber)==null?void 0:x.message})}})}),m("div",{className:"flex -mx-4",children:[e(f,{control:t,name:"employeeInsuranceDetails.dateOfJoining",render:({field:{value:l,onChange:a}})=>{var u,x,I;return e(ye,{format:"dd/MM/yyyy",disabled:!0,value:new Date(l),onChange:w=>{a(w==null?void 0:w.toISOString())},className:"mx-4",slotProps:{textField:{label:"Date Of Joining",InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",error:!!((u=s.employeeInsuranceDetails)!=null&&u.dateOfJoining),margin:"normal",helperText:(I=(x=s.employeeInsuranceDetails)==null?void 0:x.dateOfJoining)==null?void 0:I.message},actionBar:{actions:["clear"]}}})}}),e(f,{control:t,name:"employeeInsuranceDetails.dateOfBirth",render:({field:{value:l,onChange:a}})=>{var u,x,I;return e(ye,{format:"dd/MM/yyyy",disabled:!0,value:new Date(l),onChange:w=>{a(w==null?void 0:w.toISOString())},className:"mx-4",slotProps:{textField:{label:"Date Of Birth",InputLabelProps:{shrink:!0},fullWidth:!0,variant:"outlined",error:!!((u=s.employeeInsuranceDetails)!=null&&u.dateOfBirth),margin:"normal",helperText:(I=(x=s.employeeInsuranceDetails)==null?void 0:x.dateOfBirth)==null?void 0:I.message},actionBar:{actions:["clear"]}}})}}),e(f,{name:"employeeInsuranceDetails.age",control:t,render:({field:l})=>{var a,u,x;return e(v,{...l,value:l.value||"",label:"Age",fullWidth:!0,type:"number",margin:"normal",variant:"outlined",placeholder:"Age",className:"mx-4",disabled:!0,error:!!((a=s.employeeInsuranceDetails)!=null&&a.age),helperText:(x=(u=s==null?void 0:s.employeeInsuranceDetails)==null?void 0:u.age)==null?void 0:x.message})}})]}),m("div",{className:"flex -mx-4",children:[e(f,{name:"employeeInsuranceDetails.grossSalary",control:t,render:({field:l})=>{var a,u,x;return e(v,{...l,value:l.value||"",label:"Gross Salary",fullWidth:!0,type:"number",margin:"normal",variant:"outlined",placeholder:"Gross Salary",className:"mx-4",disabled:!0,error:!!((a=s.employeeInsuranceDetails)!=null&&a.grossSalary),helperText:(x=(u=s==null?void 0:s.employeeInsuranceDetails)==null?void 0:u.grossSalary)==null?void 0:x.message})}}),e(f,{name:"employeeInsuranceDetails.totalSIWider",control:t,render:({field:l})=>{var a,u,x;return e(v,{...l,value:l.value||"",label:"Total SI Wider",fullWidth:!0,type:"number",margin:"normal",variant:"outlined",placeholder:"Total SI Wider",className:"mx-4",error:!!((a=s.employeeInsuranceDetails)!=null&&a.totalSIWider),helperText:(x=(u=s==null?void 0:s.employeeInsuranceDetails)==null?void 0:u.totalSIWider)==null?void 0:x.message})}}),e(f,{name:"employeeInsuranceDetails.comprehensive",control:t,render:({field:l})=>{var a,u,x;return e(v,{...l,value:l.value||"",label:"Comprehensive",fullWidth:!0,type:"number",margin:"normal",variant:"outlined",placeholder:"Comprehensive",className:"mx-4",error:!!((a=s.employeeInsuranceDetails)!=null&&a.comprehensive),helperText:(x=(u=s==null?void 0:s.employeeInsuranceDetails)==null?void 0:u.comprehensive)==null?void 0:x.message})}}),e(f,{name:"employeeInsuranceDetails.risk",control:t,render:({field:l})=>{var a,u,x;return e(v,{...l,value:l.value||"",label:"Risk",fullWidth:!0,type:"text",margin:"normal",variant:"outlined",placeholder:"Risk",className:"mx-4",error:!!((a=s.employeeInsuranceDetails)!=null&&a.risk),helperText:(x=(u=s==null?void 0:s.employeeInsuranceDetails)==null?void 0:u.risk)==null?void 0:x.message})}})]})]})})}function Ht({UserRole:n}){const y=X(),{control:t,formState:h}=y,{errors:s}=h;return m("div",{className:"space-y-48",children:[m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:building-office"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Bank Information"})]}),m("div",{className:"flex -mx-4",children:[e(f,{name:"employeeIdentityInfos.accountHolderName",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"Account Holder Name",className:" mx-4",value:d.value||"",fullWidth:!0,error:!!((r=s.employeeIdentityInfos)!=null&&r.accountHolderName),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.accountHolderName)==null?void 0:l.message})}}),e(f,{name:"employeeIdentityInfos.bankAccountNumber",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"Bank Account Number",fullWidth:!0,className:" mx-4",value:d.value||"",error:!!((r=s.employeeIdentityInfos)!=null&&r.bankAccountNumber),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.bankAccountNumber)==null?void 0:l.message})}})]}),m("div",{className:"flex -mx-4",children:[e(f,{name:"employeeIdentityInfos.bankName",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"Bank Name",className:" mx-4",value:d.value||"",fullWidth:!0,error:!!((r=s.employeeIdentityInfos)!=null&&r.bankName),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.bankName)==null?void 0:l.message})}}),e(f,{name:"employeeIdentityInfos.branch",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"Branch",className:" mx-4",value:d.value||"",fullWidth:!0,error:!!((r=s.employeeIdentityInfos)!=null&&r.branch),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.branch)==null?void 0:l.message})}}),e(f,{name:"employeeIdentityInfos.ifsc",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"IFSC",className:" mx-4",value:d.value||"",fullWidth:!0,error:!!((r=s.employeeIdentityInfos)!=null&&r.ifsc),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.ifsc)==null?void 0:l.message})}})]})]}),m("div",{className:"space-y-16",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:identification"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Identity Information"})]}),e(f,{name:"employeeIdentityInfos.uid",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"UID",fullWidth:!0,value:d.value||"",error:!!((r=s.employeeIdentityInfos)!=null&&r.uid),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.uid)==null?void 0:l.message})}}),e(f,{name:"employeeIdentityInfos.pan",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"PAN",fullWidth:!0,value:d.value||"",error:!!((r=s.employeeIdentityInfos)!=null&&r.pan),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.pan)==null?void 0:l.message})}}),e(f,{name:"employeeIdentityInfos.providentFundNumber",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"Provident Fund Number",fullWidth:!0,value:d.value||"",error:!!((r=s.employeeIdentityInfos)!=null&&r.providentFundNumber),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.providentFundNumber)==null?void 0:l.message})}}),e(f,{name:"employeeIdentityInfos.employeeStateInsuranceNumber",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"Employee State Insurance Number",fullWidth:!0,value:d.value||"",error:!!((r=s.employeeIdentityInfos)!=null&&r.employeeStateInsuranceNumber),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.employeeStateInsuranceNumber)==null?void 0:l.message})}}),e(f,{name:"employeeIdentityInfos.biometricCode",control:t,render:({field:d})=>{var r,o,l;return e(v,{...d,label:"Biometric Code",fullWidth:!0,value:d.value||"",error:!!((r=s.employeeIdentityInfos)!=null&&r.biometricCode),helperText:(l=(o=s.employeeIdentityInfos)==null?void 0:o.biometricCode)==null?void 0:l.message})}})]})]})}const ha=se.memo(({file:n,onRemove:y,onDownload:t,isDeleting:h,isDownloading:s})=>e(na,{className:"p-10 my-20",elevation:3,children:m(V,{container:!0,alignItems:"center",spacing:2,children:[e(V,{item:!0,children:e(at,{type:(r=>{var l;const o=((l=r.split(".").pop())==null?void 0:l.toUpperCase())||"";switch(o){case"PDF":case"DOC":case"DOCX":case"XLS":case"XLSX":case"TXT":case"JPG":case"JPEG":case"PNG":case"ZIP":return o;default:return"OTHER"}})(n.fileName)})}),m(V,{item:!0,xs:!0,children:[e(F,{variant:"subtitle1",children:n.fileName}),e(F,{variant:"body2",color:"textSecondary",children:n.fileSize?`${(n.fileSize/1024).toFixed(2)} KB`:"Size unknown"})]}),m(V,{item:!0,children:[e(Ee,{onClick:t,size:"small","aria-label":"Download file",disabled:s,children:s?e(we,{size:24}):e(tt,{color:"primary"})}),e(Ee,{onClick:y,size:"small","aria-label":"Remove file",disabled:h,children:h?e(we,{size:24}):e(xe,{color:"error"})})]})]})}));ha.displayName="FileCard";function Kt({UserRole:n}){const y=localStorage.getItem(rt.tokenStorageKey),t=Se(),[h,s]=C.useState([]),{control:d,setValue:r,watch:o}=X(),[l]=nt(),[a]=lt(),[u,{isLoading:x}]=ot(),{employeeId:I}=ie(),[w,O]=C.useState(!1),[N,g]=C.useState({}),[T,A]=C.useState({}),B=o("employeeDocuments")||[],[M,U]=C.useState(null);C.useEffect(()=>{B.length>0&&h.length===0&&s(B.map(P=>({...P,isExisting:!0})))},[B]);const L=C.useCallback(async P=>{A(k=>({...k,[P]:!0})),U(null);try{const k=await fetch(`/api/Employees/download/${P}?id=${I}`,{method:"GET",headers:{"Content-Type":"application/json",authorization:`Bearer ${y}`}});if(!k.ok)throw new Error(`HTTP error! status: ${k.status}`);const j=await k.blob(),E=window.URL.createObjectURL(j),D=document.createElement("a");D.href=E,D.download=P,document.body.appendChild(D),D.click(),document.body.removeChild(D),window.URL.revokeObjectURL(E),t(z({message:"File downloaded successfully",variant:"success"}))}catch(k){console.error("Error downloading document:",k),U("Error downloading the file. Please try again."),t(z({message:"Error downloading file",variant:"error"}))}finally{A(k=>({...k,[P]:!1}))}},[I,u,t]),S=C.useCallback(async P=>{const{files:k}=P.target;if(k&&k.length>0){const j=k[0],E=j.name,D=50*1024*1024;if(h.some(re=>re.fileName===E)){t(z({message:"File already exists",variant:"error"}));return}if(j.size>D){t(z({message:"File size should not be more than 50 MB",variant:"error"}));return}O(!0);const _=new FormData;_.append("file",j);try{const re=await l({id:parseInt(I),body:_}).unwrap();console.log("File upload response:",re);const be={fileName:j.name,fileSize:j.size,fileType:te(j.type)};s(ce=>[...ce,be]),r("employeeDocuments",ce=>[...ce,be]),t(z({message:"File uploaded successfully",variant:"success"}))}catch(re){console.error("Error uploading file:",re),t(z({message:"Error uploading file",variant:"error"}))}finally{O(!1)}}},[I,l,r,t,h]),G=C.useCallback(async P=>{g(k=>({...k,[P]:!0}));try{await a({id:parseInt(I),fileName:P}).unwrap(),s(k=>{const j=k.filter(E=>E.fileName!==P);return r("employeeDocuments",j),j}),t(z({message:"File deleted successfully",variant:"success"}))}catch(k){console.error("Error deleting file:",k),t(z({message:"Error deleting file",variant:"error"}))}finally{g(k=>({...k,[P]:!1}))}},[I,a,r,t]),H=C.useCallback(P=>{L(P.fileName)},[L]),te=P=>P.includes("pdf")?ne.Pdf:P.includes("word")?ne.Docx:P.includes("text")?ne.Txt:P.includes("zip")?ne.Zip:P.includes("excel")||P.includes("spreadsheet")?ne.Xlsx:P.includes("csv")?ne.Csv:ne.Other,Z=".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png,.gif,.zip,.xlsx,.csv";return I==="new"?e(Ce,{severity:"info",children:"Please save the Employee details before adding documents."}):m(ue,{sx:{margin:"auto",padding:2},children:[e(f,{name:"employeeDocuments",control:d,defaultValue:[],render:({field:P})=>m("div",{className:"border-2 border-dashed border-gray-300 rounded p-16 text-center mb-2 cursor-pointer hover:bg-gray-200",onDrop:k=>{k.preventDefault();const j=k.dataTransfer.files;j.length>0&&S({target:{files:j}})},onDragOver:k=>k.preventDefault(),children:[e("input",{type:"file",onChange:S,style:{display:"none"},id:"file-input",accept:Z}),e("label",{htmlFor:"file-input",children:e(st,{component:"span",startIcon:e(it,{}),variant:"contained",color:"primary",loading:w,children:"Upload Files"})}),e(F,{variant:"caption",display:"block",sx:{marginTop:1},children:"Drag and drop files here or click to upload"}),e(F,{variant:"caption",display:"block",children:"Only PDF, DOC, DOCX, TXT, JPG, JPEG, PNG, GIF, ZIP, XLSX, and CSV files are allowed"})]})}),h.length>0?m(oe,{children:[e(F,{variant:"h6",gutterBottom:!0,children:"Uploaded Documents"}),h.map(P=>e(ha,{file:P,onRemove:()=>G(P.fileName),onDownload:()=>H(P),isDeleting:N[P.fileName]||!1,isDownloading:T[P.fileName]||!1},P.fileName))]}):e(Ce,{severity:"info",sx:{mt:2},children:"No documents uploaded"})]})}function Jt({UserRole:n}){const y=ie(),{employeeId:t}=y,h=Se(),{data:s,isLoading:d,isError:r}=ct({employeeId:t},{skip:!t||t==="new"});if(!t||t==="new")return e(Ce,{severity:"warning",children:"This section is only accessible for saved employees."});const[o,l]=C.useState([]);C.useState(null);const a=C.useMemo(()=>[{accessorKey:"name",header:"Name",accessorFn:u=>e(F,{component:la,to:`/apps/employees/employeesSearch/${u.employeeId}`,className:"underline",color:"secondary",role:"button",children:`${u.name}`})},{accessorKey:"email",header:"Email"},{accessorKey:"designation",header:"Designation"}],[o,h]);return d?e("div",{children:"Loading..."}):r?e("div",{children:"Error loading team members"}):m("div",{className:"flex flex-col space-y-24",children:[m("div",{className:"flex items-center border-b-1 space-x-8 pb-8",children:[e(q,{color:"action",size:24,children:"heroicons-outline:user-group"}),e(F,{className:"text-2xl",color:"text.secondary",children:"Team Members"})]}),e(na,{className:"flex flex-col flex-auto shadow rounded-lg overflow-hidden w-full",children:e(ta,{enableSorting:!1,enableTopToolbar:!1,enableColumnActions:!1,enableColumnDragging:!1,enableRowDragging:!1,enableRowActions:!1,columns:a,data:s,enableRowSelection:!1})})]})}const Qt=ge().shape({firstName:Y().required("First Name is required"),middleName:Y().required("Middle Name is required"),lastName:Y().required("Last Name is required"),email:Y().required("Email is required").email("Invalid email address"),employeeCategoryId:dt().required("Category is required"),roleId:Y().required("Employee role is required"),employeePersonalDetails:ge().shape({gender:Y().required("Gender is required"),dateOfBirth:Ge().required("Date of Birth is required").max(new Date,"Birth date cannot be in the future").nullable().test("is-adult","You must be at least 16 years old",n=>{if(!n)return!0;const y=new Date,t=new Date(y.getFullYear()-16,y.getMonth(),y.getDate());return n<=t})}),jobLevelLeaveType:Y().when("employeeWorkInformation.useDefaultLeaves",{is:!0,then:n=>n.required("Job Level must be selected when using default leaves"),otherwise:n=>n.notRequired()}),employeeWorkInformation:ge().shape({salaryType:Y().when("$isNew",{is:!1,then:n=>n.notRequired(),otherwise:n=>n.notRequired()}),hireDate:Ge().required("Hire Date is required"),salary:$().when("$isNew",{is:!1,then:n=>n.nullable().typeError("Salary must be a number").min(0,"Salary must be non-negative"),otherwise:n=>n.notRequired()}),useDefaultLeaves:ut().required(),basic:$().when("salaryType",{is:n=>n==="OnRoll",then:()=>$().nullable().min(0,"Basic must be non-negative"),otherwise:()=>$().notRequired()}),hrAllowances:$().when("salaryType",{is:n=>n==="OnRoll",then:()=>$().nullable().min(0,"HR Allowances must be non-negative"),otherwise:()=>$().notRequired()}),gratuity:$().when("salaryType",{is:n=>n==="OnRoll",then:()=>$().min(0,"Gratuity must be non-negative"),otherwise:()=>$().notRequired()}),pf:$().when("salaryType",{is:n=>n==="OnRoll",then:()=>$().min(0,"PF must be non-negative"),otherwise:()=>$().notRequired()}),bonus:$().min(0,"Bonus must be non-negative").notRequired(),esi:$().min(0,"ESI must be non-negative"),pt:$().min(0,"PT must be non-negative"),employeeLeaves:mt().when("useDefaultLeaves",{is:!1,then:n=>n.of(ge().shape({employeeLeaveType:Y().required("Leave type is required"),totalLeaves:$().required("Total leaves is required").min(1,"Total leaves must be at least 1")})).min(1,"At least one leave type must be selected").test("unique-leave-types","Duplicate leave types are not allowed",function(y){if(!y)return!0;const t=new Set;return y.every(h=>t.has(h.employeeLeaveType)?!1:(t.add(h.employeeLeaveType),!0))}),otherwise:n=>n.notRequired()})}),employeeDepartmentId:Y().required("Department is required"),employeeDesignationId:Y().required("Designation is required")});function ar(){const y=pt(x=>x.user).role,{employeeId:t}=ie(),[h,s]=C.useState("basic-info"),{data:d,isLoading:r,isError:o,refetch:l}=ht({id:t},{skip:!t||t==="new"}),a=Je({mode:"onChange",resolver:yt(Qt),context:{isNew:t==="new"},defaultValues:C.useMemo(()=>t==="new"?Te({}):d?Te(d):{},[t,d])}),u=C.useCallback((x,I)=>{s(I)},[]);return C.useEffect(()=>{t&&t!=="new"&&l()},[t,l]),se.useEffect(()=>{d&&a.reset(Te(d))},[d,a]),se.useEffect(()=>{const x=a.watch((I,{name:w,type:O})=>{O==="change"&&(console.log("Changed field:",w),console.log("Current values:",I),console.log("Current errors:",a.formState.errors))});return()=>x.unsubscribe()},[a]),r?e(ve,{}):o&&t!=="new"?m(de.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-col flex-1 items-center justify-center h-full",children:[e(F,{color:"text.secondary",variant:"h5",children:"There is no such employee!"}),e(wt,{className:"mt-24",component:la,variant:"outlined",to:"/apps/e-commerce/products",color:"inherit",children:"Go to Employee Search"})]}):e(gt,{...a,children:e(ft,{header:e(Et,{}),content:m("div",{className:"p-16 sm:p-24 space-y-24",children:[m(bt,{value:h,scrollButtons:!0,onChange:u,children:[e(ee,{value:"basic-info",label:"Employee Information"}),e(ee,{value:"basic-personal-info",label:"Personal Information"}),e(ee,{value:"work-info",label:"Work Information"}),e(ee,{value:"address-info",label:"Address"}),e(ee,{value:"identity-info",label:"Identity & Banking"}),e(ee,{value:"insurance-info",label:"Insurance Information"}),e(ee,{value:"education-info",label:"Education Information"}),e(ee,{value:"document-upload",label:"Document Uploads"}),e(ee,{value:"team-member",label:"Team Members"})]}),e(Yt,{tabValue:h,UserRole:y})]})})})}const Yt=se.memo(({tabValue:n,UserRole:y})=>{switch(n){case"basic-info":return e(qt,{UserRole:y});case"basic-personal-info":return e(Mt,{UserRole:y});case"work-info":return e(Bt,{UserRole:y});case"address-info":return e(Ut,{UserRole:y});case"identity-info":return e(Ht,{UserRole:y});case"insurance-info":return e(Gt,{UserRole:y});case"education-info":return e(Vt,{UserRole:y});case"document-upload":return e(Kt,{UserRole:y});case"team-member":return e(Jt,{UserRole:y});default:return null}});export{ar as default};
